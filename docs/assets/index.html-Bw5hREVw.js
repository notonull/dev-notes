import{_ as i,e as t,f as a,o as n}from"./app-CDTzsJh-.js";const d={};function e(l,s){return n(),t("div",null,s[0]||(s[0]=[a(`<h2 id="_1-参考" tabindex="-1"><a class="header-anchor" href="#_1-参考"><span>1.参考</span></a></h2><p><strong>官方地址:</strong> https://www.oracle.com/</p><p><strong>官方服务器版本下载地址:</strong> https://www.oracle.com/cn/java/technologies/downloads/</p><h2 id="_2-jvm调优" tabindex="-1"><a class="header-anchor" href="#_2-jvm调优"><span>2.Jvm调优</span></a></h2><h3 id="_2-1-大堆调优" tabindex="-1"><a class="header-anchor" href="#_2-1-大堆调优"><span>2.1. 大堆调优</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nohup</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> java</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # ===== JVM 基础 =====</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -server</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                                # 使用 Server 模式 JVM，性能更优</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -XX:+UnlockExperimentalVMOptions</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">       # 解锁实验性参数，允许使用部分实验功能</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # ===== JVM 堆设置 =====</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -Xms20G</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                                # 初始堆大小 20G，避免启动时扩容</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -Xmx20G</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                                # 最大堆大小 20G，固定内存上限</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # ===== GC 设置 =====</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -XX:+UseG1GC</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                           # 使用 G1 垃圾收集器（适合大堆）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -XX:MaxGCPauseMillis</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=200</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">               # 目标最大 GC 停顿时间 200ms</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -XX:+ParallelRefProcEnabled</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">            # 启用引用对象的并行处理，降低 STW 时间</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # ===== GC 日志输出 =====</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -XX:+PrintGC</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                           # 打印 GC 简要日志</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -XX:+PrintGCDetails</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                    # 打印 GC 详细日志</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -XX:+PrintGCTimeStamps</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                 # 打印相对时间戳</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -XX:+PrintGCDateStamps</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                 # 打印绝对时间戳（日期格式）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -XX:+PrintGCApplicationStoppedTime</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     # 打印应用因 GC 停顿的时间</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -XX:+PrintGCApplicationConcurrentTime</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 打印应用并发运行时间</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -Xloggc:/opt/logs/demo/gc-$(date</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +%Y%m%d_%H%M%S</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">).log </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # GC 日志文件路径（带时间戳）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -XX:+UseGCLogFileRotation</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">              # 启用 GC 日志文件轮转</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -XX:NumberOfGCLogFiles</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=10</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">              # 最多保留 10 个 GC 日志文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -XX:GCLogFileSize</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=200M</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                 # 单个 GC 日志文件大小 200MB</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # ===== OOM Dump =====</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -XX:+HeapDumpOnOutOfMemoryError</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # OOM 时自动导出堆快照</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -XX:HeapDumpPath</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=/opt/logs/demo/heapdump-</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">$(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">date</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +%Y%m%d_%H%M%S</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">).hprof </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 堆转储文件路径</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # ===== JMX 远程监控 =====</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -Dcom.sun.management.jmxremote</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">         # 启用 JMX</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -Dcom.sun.management.jmxremote.port</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=1808</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> JMX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 端口</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -Dcom.sun.management.jmxremote.authenticate</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">false</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 关闭认证（有安全风险）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -Dcom.sun.management.jmxremote.ssl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">false</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">#</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 关闭</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> SSL</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -Djava.rmi.server.hostname</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=127.0.0.1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">   # 指定 JMX 主机名（仅允许本机访问）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # ===== 应用启动 =====</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -jar</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $completeAppname</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\ </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                  # 启动应用 Jar 包</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  &gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> /dev/null</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> 2&gt;&amp;1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">                        # 屏蔽日志输出（建议改为写入日志文件）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>类型</th><th>参数</th><th>作用</th><th>对性能影响</th><th>备注</th></tr></thead><tbody><tr><td><strong>JVM 基础</strong></td><td><code>-server</code></td><td>启用 Server JVM</td><td>正面（更佳优化）</td><td>生产常用</td></tr><tr><td></td><td><code>-XX:+UnlockExperimentalVMOptions</code></td><td>解锁实验性参数</td><td>无</td><td>允许使用实验功能</td></tr><tr><td><strong>堆内存设置</strong></td><td><code>-Xms20G</code></td><td>初始堆大小</td><td>无</td><td>避免启动时扩容停顿</td></tr><tr><td></td><td><code>-Xmx20G</code></td><td>最大堆大小</td><td>无</td><td>固定堆大小，生产常用</td></tr><tr><td><strong>GC 算法与调优</strong></td><td><code>-XX:+UseG1GC</code></td><td>使用 G1 GC</td><td>无（大堆更优）</td><td>适合 &gt;8G 堆</td></tr><tr><td></td><td><code>-XX:MaxGCPauseMillis=200</code></td><td>目标最大停顿 200ms</td><td>可能增加 CPU 占用</td><td>仅为目标，不保证</td></tr><tr><td></td><td><code>-XX:+ParallelRefProcEnabled</code></td><td>并行处理引用对象</td><td>小幅 CPU 占用</td><td>建议开启</td></tr><tr><td><strong>GC 日志（打印）</strong></td><td><code>-XX:+PrintGC</code></td><td>打印简要 GC 日志</td><td>轻微</td><td>排查必备</td></tr><tr><td></td><td><code>-XX:+PrintGCDetails</code></td><td>打印详细 GC 信息</td><td>轻微</td><td>包含内存分代信息</td></tr><tr><td></td><td><code>-XX:+PrintGCTimeStamps</code></td><td>打印相对时间戳</td><td>无</td><td>用于分析顺序</td></tr><tr><td></td><td><code>-XX:+PrintGCDateStamps</code></td><td>打印日期时间戳</td><td>无</td><td>长期运行必备</td></tr><tr><td></td><td><code>-XX:+PrintGCApplicationStoppedTime</code></td><td>打印应用因 GC 停顿的时间</td><td>无</td><td>用于评估 STW</td></tr><tr><td></td><td><code>-XX:+PrintGCApplicationConcurrentTime</code></td><td>打印应用并发时间</td><td>无</td><td>分析并发 GC</td></tr><tr><td><strong>GC 日志（文件）</strong></td><td><code>-Xloggc:/opt/logs/demo/gc-$(date ...).log</code></td><td>指定 GC 日志文件路径（带时间戳）</td><td>无</td><td>启动即命名，便于归档</td></tr><tr><td></td><td><code>-XX:+UseGCLogFileRotation</code></td><td>启用 GC 日志轮转</td><td>无</td><td>防止单文件过大</td></tr><tr><td></td><td><code>-XX:NumberOfGCLogFiles=10</code></td><td>保留日志文件个数</td><td>无</td><td>配合轮转使用</td></tr><tr><td></td><td><code>-XX:GCLogFileSize=200M</code></td><td>单个 GC 日志最大大小</td><td>无</td><td>单位 MB</td></tr><tr><td><strong>OOM Dump</strong></td><td><code>-XX:+HeapDumpOnOutOfMemoryError</code></td><td>OOM 时自动生成堆快照</td><td>OOM 时磁盘写入大</td><td>用于分析内存泄漏</td></tr><tr><td></td><td><code>-XX:HeapDumpPath=/opt/logs/demo/...hprof</code></td><td>Heap dump 保存路径（带时间戳）</td><td>无</td><td>避免覆盖</td></tr><tr><td><strong>JMX 远程监控</strong></td><td><code>-Dcom.sun.management.jmxremote</code></td><td>开启 JMX 服务</td><td>无</td><td>用于监控</td></tr><tr><td></td><td><code>-Dcom.sun.management.jmxremote.port=1808</code></td><td>JMX 监听端口</td><td>无</td><td>内网使用</td></tr><tr><td></td><td><code>-Dcom.sun.management.jmxremote.authenticate=false</code></td><td>关闭认证</td><td>无（安全风险）</td><td>仅本机调试可用，生产建议开启</td></tr><tr><td></td><td><code>-Dcom.sun.management.jmxremote.ssl=false</code></td><td>关闭 SSL</td><td>无</td><td>简化配置</td></tr><tr><td></td><td><code>-Djava.rmi.server.hostname=127.0.0.1</code></td><td>指定 RMI 主机名（绑定回环地址）</td><td>无</td><td>防止外部访问，远程需改为实际 IP</td></tr><tr><td><strong>启动方式 / 输出</strong></td><td><code>nohup ... &amp;</code></td><td>后台运行</td><td>无</td><td>常见生产方式</td></tr><tr><td></td><td><code>-jar $completeAppname</code></td><td>启动 jar 包</td><td>无</td><td>替换为实际路径</td></tr><tr><td></td><td><code>&gt; /dev/null 2&gt;&amp;1</code></td><td>屏蔽 stdout/stderr</td><td>无</td><td>建议改为写入日志文件</td></tr></tbody></table><h3 id="_2-2-jvm监控" tabindex="-1"><a class="header-anchor" href="#_2-2-jvm监控"><span>2.2.Jvm监控</span></a></h3>`,8)]))}const p=i(d,[["render",e],["__file","index.html.vue"]]),r=JSON.parse(`{"path":"/blog/l90oqeea/","title":"【Linux】【Jvm】Jvm运维","lang":"zh-CN","frontmatter":{"title":"【Linux】【Jvm】Jvm运维","copyright":"CC-BY-4.0","tags":["linux","jvm"],"createTime":"2025/09/15 03:34:29","permalink":"/blog/l90oqeea/","description":"1.参考 官方地址: https://www.oracle.com/ 官方服务器版本下载地址: https://www.oracle.com/cn/java/technologies/downloads/ 2.Jvm调优 2.1. 大堆调优 2.2.Jvm监控","head":[["meta",{"property":"og:url","content":"https://notonull.github.io/dev-notes/blog/l90oqeea/"}],["meta",{"property":"og:site_name","content":"aGeng 's Blog"}],["meta",{"property":"og:title","content":"【Linux】【Jvm】Jvm运维"}],["meta",{"property":"og:description","content":"1.参考 官方地址: https://www.oracle.com/ 官方服务器版本下载地址: https://www.oracle.com/cn/java/technologies/downloads/ 2.Jvm调优 2.1. 大堆调优 2.2.Jvm监控"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-14T20:44:00.000Z"}],["meta",{"property":"article:tag","content":"linux"}],["meta",{"property":"article:tag","content":"jvm"}],["meta",{"property":"article:modified_time","content":"2025-09-14T20:44:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"【Linux】【Jvm】Jvm运维\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-09-14T20:44:00.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":3.11,"words":932},"git":{"updatedTime":1757882640000,"contributors":[{"name":"ronggeng.chen","username":"ronggeng.chen","email":"chen.ronggeng.email@gmail.com","commits":1,"avatar":"https://avatars.githubusercontent.com/ronggeng.chen?v=4","url":"https://github.com/ronggeng.chen"}]},"autoDesc":true,"filePathRelative":"应用运维/【Linux】【Jvm】Jvm调优与监控.md","categoryList":[{"id":"81d715","sort":10010,"name":"应用运维"}]}`);export{p as comp,r as data};
