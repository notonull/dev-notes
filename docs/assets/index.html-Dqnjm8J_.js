import{_ as l,e as r,f as n,g as t,j as i,h as a,i as d,r as h,o}from"./app-wstiUAkr.js";const p={};function k(c,s){const e=h("RouteLink");return o(),r("div",null,[s[5]||(s[5]=n('<h2 id="_1-参考" tabindex="-1"><a class="header-anchor" href="#_1-参考"><span>1.参考</span></a></h2><p><a href="https://flink.apache.org/" target="_blank" rel="noopener noreferrer">官方地址</a></p><p><a href="https://nightlies.apache.org/flink/" target="_blank" rel="noopener noreferrer">官方文档地址</a></p><p><a href="https://github.com/apache/flink-cdc" target="_blank" rel="noopener noreferrer">github flinkcdc</a></p><h2 id="_2-前置条件" tabindex="-1"><a class="header-anchor" href="#_2-前置条件"><span>2.前置条件</span></a></h2><p><strong>系统版本:</strong> any</p><p><strong>软件依赖:</strong> flink</p><p><strong>权限要求:</strong> root</p><p><strong>网络要求:</strong> any</p><p><strong>其他注意事项:</strong></p><h2 id="_3-环境准备" tabindex="-1"><a class="header-anchor" href="#_3-环境准备"><span>3.环境准备</span></a></h2>',11)),t("p",null,[s[1]||(s[1]=i("待完善 ")),a(e,{to:"/%E5%BA%94%E7%94%A8%E8%BF%90%E7%BB%B4/%E5%BC%95%E7%94%A8%E8%B7%AF%E5%BE%84%E6%96%87%E6%A1%A3.html"},{default:d(()=>s[0]||(s[0]=[i("Oracle安装")])),_:1})]),t("p",null,[a(e,{to:"/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%90%E7%BB%B4/Oracle/Oracle%20Logmnr%E8%A1%A5%E5%85%A8%E6%97%A5%E5%BF%97%E6%93%8D%E4%BD%9C%E8%AF%B4%E6%98%8E.html"},{default:d(()=>s[2]||(s[2]=[i("OracleBinLog开启")])),_:1})]),s[6]||(s[6]=t("h2",{id:"_4-安装部署",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_4-安装部署"},[t("span",null,"4.安装部署")])],-1)),t("p",null,[s[4]||(s[4]=i("待完善 ")),a(e,{to:"/%E5%BA%94%E7%94%A8%E8%BF%90%E7%BB%B4/%E5%BC%95%E7%94%A8%E8%B7%AF%E5%BE%84%E6%96%87%E6%A1%A3.html"},{default:d(()=>s[3]||(s[3]=[i("Flink环境安装")])),_:1})]),s[7]||(s[7]=n(`<h2 id="_5-配置说明" tabindex="-1"><a class="header-anchor" href="#_5-配置说明"><span>5.配置说明</span></a></h2><h3 id="_5-1-debezium" tabindex="-1"><a class="header-anchor" href="#_5-1-debezium"><span>5.1.debezium</span></a></h3><div class="language-markdown line-numbers-mode" data-highlighter="shiki" data-ext="markdown" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&quot;database.rule&quot;:&quot;dml&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&quot;debezium.poll.interval.ms&quot;:&quot;500&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&quot;debezium.heartbeat.interval.ms&quot;:&quot;3000&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&quot;database.history.kafka.recovery.poll.interval.ms&quot;:&quot;3000&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&quot;database.history.store.only.captured.tables.ddl&quot;:&quot;cdc-true&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&quot;log.mining.strategy&quot;:&quot;online_catalog&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>配置项</th><th>描述</th><th>默认值 / 示例</th></tr></thead><tbody><tr><td><code>database.hostname</code></td><td>Oracle 数据库地址，用于连接源数据库</td><td><code>127.0.0.1</code></td></tr><tr><td><code>database.port</code></td><td>Oracle 端口号</td><td><code>1521</code></td></tr><tr><td><code>database.user</code></td><td>数据库用户名，用于读取 redo/归档日志</td><td><code>cdc_user</code></td></tr><tr><td><code>database.password</code></td><td>数据库密码</td><td><code>StrongPassword</code></td></tr><tr><td><code>database.dbname</code></td><td>指定 PDB 或 SID</td><td><code>ORCLPDB1</code></td></tr><tr><td><code>database.server.name</code></td><td>逻辑数据库标识，用于 Kafka topic 命名</td><td><code>dbserver1</code></td></tr><tr><td><code>database.rule</code></td><td>捕获操作类型，<code>dml</code> 表示只捕获 INSERT/UPDATE/DELETE</td><td><code>dml</code></td></tr><tr><td><code>debezium.poll.interval.ms</code></td><td>redo 日志轮询间隔，每隔指定毫秒读取日志</td><td><code>500</code></td></tr><tr><td><code>debezium.heartbeat.interval.ms</code></td><td>心跳事件发送间隔，用于更新 SCN/偏移</td><td><code>3000</code></td></tr><tr><td><code>database.history.kafka.recovery.poll.interval.ms</code></td><td>恢复 Kafka schema/history topic 的轮询间隔</td><td><code>3000</code></td></tr><tr><td><code>database.history.store.only.captured.tables.ddl</code></td><td>只存储开启 CDC 的表的 DDL 到 history topic</td><td><code>cdc-true</code></td></tr><tr><td><code>log.mining.strategy</code></td><td>LogMiner 字典策略，<code>online_catalog</code> 表示使用在线字典解析 redo</td><td><code>online_catalog</code></td></tr><tr><td><code>snapshot.mode</code></td><td>全量快照策略，决定启动时是否做初始全量快照</td><td><code>initial</code></td></tr><tr><td><code>fetch.size</code></td><td>批量读取数据大小，每次读取 redo/归档日志的行数</td><td><code>1024</code></td></tr><tr><td><code>table.include.list</code></td><td>捕获指定表的变更，按表名列表</td><td>-</td></tr><tr><td><code>table.exclude.list</code></td><td>排除表，避免日志量过大</td><td>-</td></tr><tr><td><code>decimal.handling.mode</code></td><td>Decimal 类型解析方式</td><td><code>precise</code></td></tr><tr><td><code>time.precision.mode</code></td><td>时间类型解析精度</td><td><code>adaptive_time_microseconds</code></td></tr><tr><td><code>max.batch.size</code></td><td>每次向下游发送的最大事件条数</td><td><code>2048</code></td></tr><tr><td><code>poll.interval.ms</code></td><td>Flink CDC 内部轮询间隔</td><td><code>500</code></td></tr><tr><td><code>log.mining.start.scn</code></td><td>从指定 SCN 开始捕获增量数据</td><td>-</td></tr><tr><td><code>log.mining.end.scn</code></td><td>可选，指定捕获结束 SCN</td><td>-</td></tr><tr><td><code>scan.incremental.snapshot.enabled</code></td><td>是否开启增量快照模式</td><td><code>false</code></td></tr></tbody></table><h2 id="_6-常用操作" tabindex="-1"><a class="header-anchor" href="#_6-常用操作"><span>6.常用操作</span></a></h2><h2 id="_7-排错与日志" tabindex="-1"><a class="header-anchor" href="#_7-排错与日志"><span>7.排错与日志</span></a></h2><h3 id="_7-1-未启用数据库级别补充日志" tabindex="-1"><a class="header-anchor" href="#_7-1-未启用数据库级别补充日志"><span>7.1.未启用数据库级别补充日志</span></a></h3><p><strong>报错日志</strong></p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Supplemental</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> logging</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> properly</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> configured</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Use:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ALTER</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> DATABASE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ADD</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> SUPPLEMENTAL</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> LOG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> DATA</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>原因</strong></p><ul><li>当前源端数据源连接未启用数据库级别补充日志</li></ul><p><strong>解决</strong></p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ALTER</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> DATABASE</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> ADD</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> SUPPLEMENTAL </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">LOG</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> DATA</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_7-2-表log-mining-flush不存在" tabindex="-1"><a class="header-anchor" href="#_7-2-表log-mining-flush不存在"><span>7.2.表LOG_MINING_FLUSH不存在</span></a></h3><p><strong>报错日志</strong></p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Database</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> table</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">LOG_MINING_FLUSH</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> no</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> longer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exists,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supplemental</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> log</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> check</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> skipped</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>原因</strong></p><ul><li>当前源端用户无创建<code>LOG_MINING_FLUSH</code>表权限,建议使用新建CDC用户抽取源端业务数据</li></ul><h3 id="_7-3-未开启全字段补全日志" tabindex="-1"><a class="header-anchor" href="#_7-3-未开启全字段补全日志"><span>7.3.未开启全字段补全日志</span></a></h3><p><strong>报错日志</strong></p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Database</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> table</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">{}</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> configured</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> with</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supplemental</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> logging</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (ALL) COLUMNS only explicitly changed columns will be captured. Use: ALTER TABLE </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{}</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.{} ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>原因</strong></p><ul><li>当前表未开启全字段补全日志</li></ul><p><strong>解决</strong></p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">ALTER</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> TABLE</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">模式</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">.</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">表名</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> ADD</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> SUPPLEMENTAL </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">LOG</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> DATA</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (ALL) COLUMNS;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_8-升级与维护" tabindex="-1"><a class="header-anchor" href="#_8-升级与维护"><span>8.升级与维护</span></a></h2><h2 id="_9-附录" tabindex="-1"><a class="header-anchor" href="#_9-附录"><span>9.附录</span></a></h2>`,27))])}const u=l(p,[["render",k],["__file","index.html.vue"]]),m=JSON.parse(`{"path":"/blog/86skjl3u/","title":"Oracle 实时同步教程","lang":"zh-CN","frontmatter":{"title":"Oracle 实时同步教程","copyright":"CC-BY-4.0","tags":["flink","flinkCDC","oracle"],"createTime":"2025/09/17 12:41:10","permalink":"/blog/86skjl3u/","description":"1.参考 官方地址 官方文档地址 github flinkcdc 2.前置条件 系统版本: any 软件依赖: flink 权限要求: root 网络要求: any 其他注意事项: 3.环境准备 待完善 4.安装部署 待完善 5.配置说明 5.1.debezium 6.常用操作 7.排错与日志 7.1.未启用数据库级别补充日志 报错日志 原因 当前源端...","head":[["meta",{"property":"og:url","content":"https://notonull.github.io/dev-notes/blog/86skjl3u/"}],["meta",{"property":"og:site_name","content":"aGeng 's Blog"}],["meta",{"property":"og:title","content":"Oracle 实时同步教程"}],["meta",{"property":"og:description","content":"1.参考 官方地址 官方文档地址 github flinkcdc 2.前置条件 系统版本: any 软件依赖: flink 权限要求: root 网络要求: any 其他注意事项: 3.环境准备 待完善 4.安装部署 待完善 5.配置说明 5.1.debezium 6.常用操作 7.排错与日志 7.1.未启用数据库级别补充日志 报错日志 原因 当前源端..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-26T17:41:19.000Z"}],["meta",{"property":"article:tag","content":"flink"}],["meta",{"property":"article:tag","content":"flinkCDC"}],["meta",{"property":"article:tag","content":"oracle"}],["meta",{"property":"article:modified_time","content":"2025-09-26T17:41:19.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Oracle 实时同步教程\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-09-26T17:41:19.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":2.3,"words":690},"git":{"updatedTime":1758908479000,"contributors":[{"name":"ops_chengeng","username":"ops_chengeng","email":"ops_chengeng@demo.com","commits":1,"avatar":"https://avatars.githubusercontent.com/ops_chengeng?v=4","url":"https://github.com/ops_chengeng"}]},"autoDesc":true,"filePathRelative":"应用运维/Oracle 实时同步教程.md","categoryList":[{"id":"81d715","sort":10000,"name":"应用运维"}]}`);export{u as comp,m as data};
